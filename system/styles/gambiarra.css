/* ============================================================
 * GAMBIARRA.SYS6 — CSS v0.6.0
 * Objetivo: melhorar visual sem quebrar classes existentes.
 * Mantém compatibilidade com:
 * - templates/actor-character.html
 * - templates/item/item-poder.html
 * - scripts/rolls.js chat card + dialog
 * ============================================================ */

:root {
  --gambi-bg: rgba(20, 20, 26, 0.03);
  --gambi-panel: rgba(255, 255, 255, 0.85);
  --gambi-panel-2: rgba(255, 255, 255, 0.65);
  --gambi-border: rgba(0, 0, 0, 0.12);
  --gambi-border-strong: rgba(0, 0, 0, 0.2);
  --gambi-text: rgba(0, 0, 0, 0.88);
  --gambi-muted: rgba(0, 0, 0, 0.6);

  --gambi-radius: 14px;
  --gambi-radius-sm: 10px;
  --gambi-gap: 12px;

  --gambi-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  --gambi-shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.08);

  /* sem mudar suas cores “semânticas” */
  --gambi-ok: rgba(46, 204, 113, 0.18);
  --gambi-strong: rgba(52, 152, 219, 0.18);
  --gambi-bug: rgba(231, 76, 60, 0.16);
  --gambi-purple: rgba(138, 77, 232, 0.18);

  --gambi-focus: rgba(138, 77, 232, 0.35);
}

/* ------------------------------------------------------------
 * Base
 * ------------------------------------------------------------ */

.gambiarra-sheet,
.item-sheet {
  color: var(--gambi-text);
}

.gambiarra-sheet {
  padding: 12px;
  background: var(--gambi-bg);
  border-radius: var(--gambi-radius);
}

.gambiarra-sheet .sheet-header,
.item-sheet .sheet-header {
  display: grid;
  gap: 6px;
  padding: 12px 12px 10px;
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: var(--gambi-panel);
  box-shadow: var(--gambi-shadow-sm);
}

.gambiarra-sheet .sheet-header .charname input,
.item-sheet .sheet-header input[name="name"] {
  width: 100%;
  font-size: 22px;
  line-height: 1.15;
  font-weight: 800;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--gambi-border);
  background: rgba(255, 255, 255, 0.9);
}

.gambiarra-sheet .sheet-header .charname input:focus,
.item-sheet .sheet-header input[name="name"]:focus {
  outline: none;
  border-color: var(--gambi-focus);
  box-shadow: 0 0 0 4px var(--gambi-focus);
}

.gambiarra-sheet .arquetipo {
  margin: 0;
  color: var(--gambi-muted);
  font-weight: 600;
}

.gambiarra-sheet section,
.item-sheet section {
  margin-top: 12px;
}

/* Títulos */
.gambiarra-sheet h2,
.gambiarra-sheet h3,
.item-sheet h2,
.item-sheet h3 {
  margin: 0 0 8px;
  line-height: 1.2;
}

.gambiarra-sheet h2 {
  font-size: 16px;
  font-weight: 800;
}

.gambiarra-sheet h3 {
  font-size: 13px;
  font-weight: 800;
  color: var(--gambi-muted);
}

/* Texto auxiliar */
.hint,
.gambi-sub.is-muted {
  color: var(--gambi-muted);
  font-size: 12px;
}

/* Inputs padrões */
.gambiarra-sheet input[type="text"],
.gambiarra-sheet input[type="number"],
.gambiarra-sheet select,
.gambiarra-sheet textarea,
.item-sheet input[type="text"],
.item-sheet input[type="number"],
.item-sheet select,
.item-sheet textarea {
  border: 1px solid var(--gambi-border);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.92);
  padding: 8px 10px;
  color: var(--gambi-text);
}

.gambiarra-sheet textarea,
.item-sheet textarea {
  width: 100%;
  resize: vertical;
  min-height: 90px;
}

.gambiarra-sheet input:focus,
.gambiarra-sheet select:focus,
.gambiarra-sheet textarea:focus,
.item-sheet input:focus,
.item-sheet select:focus,
.item-sheet textarea:focus {
  outline: none;
  border-color: var(--gambi-focus);
  box-shadow: 0 0 0 4px var(--gambi-focus);
}

/* Botões */
.gambiarra-sheet button,
.gambiarra-roll button,
.item-sheet button {
  border: 1px solid var(--gambi-border);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.92);
  padding: 8px 12px;
  font-weight: 800;
  cursor: pointer;
  transition:
    transform 0.08s ease,
    box-shadow 0.12s ease,
    border-color 0.12s ease;
}

.gambiarra-sheet button:hover,
.gambiarra-roll button:hover,
.item-sheet button:hover {
  border-color: var(--gambi-border-strong);
  box-shadow: var(--gambi-shadow-sm);
  transform: translateY(-1px);
}

.gambiarra-sheet button:active,
.gambiarra-roll button:active,
.item-sheet button:active {
  transform: translateY(0px);
  box-shadow: none;
}

/* ------------------------------------------------------------
 * Actor: Atributos
 * ------------------------------------------------------------ */

.attributes {
  display: grid;
  gap: var(--gambi-gap);
}

/* grid responsivo: 3 atributos + sumbar */
.attributes {
  grid-template-columns: repeat(12, 1fr);
}

.attribute {
  grid-column: span 4;
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: var(--gambi-panel);
  box-shadow: var(--gambi-shadow-sm);
  padding: 12px;
  display: grid;
  gap: 10px;
}

.attribute h2 {
  font-size: 14px;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.attribute input[type="number"] {
  width: 100%;
  font-size: 18px;
  font-weight: 900;
  text-align: center;
  padding: 10px 12px;
}

/* leve identidade por atributo */
.attribute.corpo {
  background: linear-gradient(180deg, rgba(31, 179, 91, 0.1), rgba(255, 255, 255, 0.88));
}
.attribute.mente {
  background: linear-gradient(180deg, rgba(47, 125, 225, 0.1), rgba(255, 255, 255, 0.88));
}
.attribute.coracao {
  background: linear-gradient(180deg, rgba(226, 74, 74, 0.1), rgba(255, 255, 255, 0.88));
}

@media (max-width: 820px) {
  .attribute {
    grid-column: span 12;
  }
}

/* Sumbar (mantém a classe existente) */
.gambiarra-sumbar {
  grid-column: span 12;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;

  padding: 10px 12px;
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: var(--gambi-panel-2);
  box-shadow: var(--gambi-shadow-sm);
}

.gambiarra-sumbar .sum-left,
.gambiarra-sumbar .sum-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sum-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid var(--gambi-border);
  background: rgba(255, 255, 255, 0.92);
  font-weight: 900;
}

.gambiarra-sumbar.ok {
  background: linear-gradient(180deg, var(--gambi-ok), rgba(255, 255, 255, 0.88));
}
.gambiarra-sumbar.bug {
  background: linear-gradient(180deg, var(--gambi-bug), rgba(255, 255, 255, 0.88));
}
.gambiarra-sumbar.strong {
  background: linear-gradient(180deg, var(--gambi-strong), rgba(255, 255, 255, 0.88));
}

/* ------------------------------------------------------------
 * Actor: Rolagem
 * ------------------------------------------------------------ */

.roll-section {
  display: flex;
  justify-content: flex-start;
  margin-top: 12px;
}

.roll-section .roll-desafio {
  padding: 10px 14px;
  border-radius: 14px;
}

/* ------------------------------------------------------------
 * Actor: Poderes
 * ------------------------------------------------------------ */

.powers,
.effects,
.items {
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: var(--gambi-panel);
  box-shadow: var(--gambi-shadow-sm);
  padding: 12px;
}

.power-list {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  display: grid;
  gap: 10px;
}

.power {
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: rgba(255, 255, 255, 0.92);
  padding: 10px 12px;
}

.power-header {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.power-header strong {
  font-size: 14px;
  font-weight: 900;
}

.power .state {
  font-size: 12px;
  font-weight: 800;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--gambi-border);
  background: rgba(0, 0, 0, 0.03);
  color: var(--gambi-muted);
}

/* estado do poder via classe power-ativo / power-esgotado / power-fora */
.power-ativo {
  background: linear-gradient(180deg, rgba(31, 179, 91, 0.1), rgba(255, 255, 255, 0.92));
}
.power-esgotado {
  background: linear-gradient(180deg, rgba(241, 196, 15, 0.14), rgba(255, 255, 255, 0.92));
}
.power-fora {
  background: linear-gradient(180deg, rgba(231, 76, 60, 0.12), rgba(255, 255, 255, 0.92));
}

.power-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  grid-column: 1 / -1;
}

.power-actions button {
  padding: 6px 10px;
  border-radius: 12px;
  font-weight: 800;
}

.power .description {
  margin: 10px 0 0;
  white-space: pre-line; /* mantém \n da descricao */
  color: var(--gambi-text);
}

/* botões do bloco de poderes */
.powers .add-power,
.powers .roll-power,
.powers .create-power {
  margin-top: 10px;
  margin-right: 8px;
}

/* ------------------------------------------------------------
 * Actor: Efeitos / Itens
 * ------------------------------------------------------------ */

.effects ul,
.items ul {
  margin: 6px 0 0;
  padding-left: 18px;
}

.effects li,
.items li {
  margin: 6px 0;
}

.effects button,
.items button {
  margin-top: 10px;
  margin-right: 8px;
}

/* ------------------------------------------------------------
 * Item sheet: Poder
 * ------------------------------------------------------------ */

.item-sheet .sheet-body {
  margin-top: 12px;
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: var(--gambi-panel);
  box-shadow: var(--gambi-shadow-sm);
  padding: 12px;
}

.item-sheet .form-group {
  display: grid;
  gap: 6px;
  margin-bottom: 12px;
}

.item-sheet .form-group > label {
  font-weight: 900;
  font-size: 12px;
  color: var(--gambi-muted);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.item-sheet hr {
  border: none;
  height: 1px;
  background: var(--gambi-border);
  margin: 12px 0;
}

.item-sheet label.checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 6px 0;
  padding: 6px 8px;
  border-radius: 12px;
  border: 1px solid transparent;
}

.item-sheet label.checkbox:hover {
  border-color: var(--gambi-border);
  background: rgba(0, 0, 0, 0.02);
}

/* ------------------------------------------------------------
 * Dialog: Rolagem (gambiarra-roll + roxos)
 * ------------------------------------------------------------ */

.gambiarra-roll .form-group {
  display: grid;
  gap: 6px;
  margin-bottom: 12px;
}

.gambiarra-roll hr {
  border: none;
  height: 1px;
  background: var(--gambi-border);
  margin: 12px 0;
}

.purple-label {
  font-weight: 900;
}

.purple-row {
  display: grid;
  grid-template-columns: auto 64px auto 1fr;
  gap: 10px;
  align-items: center;
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(138, 77, 232, 0.25);
  background: linear-gradient(180deg, var(--gambi-purple), rgba(255, 255, 255, 0.86));
}

.purple-btn {
  width: 36px;
  height: 36px;
  border-radius: 12px;
  font-weight: 900;
  font-size: 18px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.purple-value {
  text-align: center;
  font-weight: 900;
  font-size: 16px;
  padding: 8px 10px;
}

@media (max-width: 520px) {
  .purple-row {
    grid-template-columns: auto 64px auto;
  }
  .purple-row .hint {
    grid-column: 1 / -1;
  }
}

/* ------------------------------------------------------------
 * Chat card: gambi-chat
 * ------------------------------------------------------------ */

.gambi-chat {
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: rgba(255, 255, 255, 0.92);
  padding: 12px;
}

.gambi-chat-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.gambi-chat-head h2 {
  margin: 0;
  font-size: 15px;
  font-weight: 900;
}

.gambi-chat-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 10px 14px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--gambi-border);
  background: rgba(0, 0, 0, 0.02);
  margin-bottom: 10px;
}

.gambi-line {
  border: 1px solid var(--gambi-border);
  border-radius: var(--gambi-radius);
  background: rgba(0, 0, 0, 0.01);
  padding: 10px;
  margin-bottom: 10px;
}

.gambi-line-title {
  font-weight: 900;
  font-size: 12px;
  color: var(--gambi-muted);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.gambi-dice {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 6px;
}

.gambi-die {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--gambi-border);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  background: rgba(255, 255, 255, 0.95);
}

.gambi-die.is-success {
  border-color: rgba(46, 204, 113, 0.45);
  box-shadow: 0 0 0 4px rgba(46, 204, 113, 0.12);
}

.gambi-chat-summary {
  border-top: 1px solid var(--gambi-border);
  padding-top: 10px;
  display: grid;
  gap: 6px;
}

.gambi-result {
  margin-top: 4px;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid var(--gambi-border);
  background: rgba(0, 0, 0, 0.02);
}

/* badges do chat */
.gambi-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--gambi-border);
  font-weight: 900;
  font-size: 12px;
  white-space: nowrap;
}

.gambi-badge.is-ok {
  background: linear-gradient(180deg, var(--gambi-ok), rgba(255, 255, 255, 0.92));
}
.gambi-badge.is-strong {
  background: linear-gradient(180deg, var(--gambi-strong), rgba(255, 255, 255, 0.92));
}
.gambi-badge.is-bug {
  background: linear-gradient(180deg, var(--gambi-bug), rgba(255, 255, 255, 0.92));
}

/* ============================================================
 * 0.6.0 — Chat dice: cor de sucesso por atributo/origem
 * ============================================================ */

/* sucessos por atributo */
.gambi-die.is-success.suc-corpo {
  border-color: rgba(31, 179, 91, 0.65);
  background: rgba(31, 179, 91, 0.18);
  box-shadow: 0 0 0 4px rgba(31, 179, 91, 0.14);
}

.gambi-die.is-success.suc-mente {
  border-color: rgba(47, 125, 225, 0.65);
  background: rgba(47, 125, 225, 0.18);
  box-shadow: 0 0 0 4px rgba(47, 125, 225, 0.14);
}

.gambi-die.is-success.suc-coracao {
  border-color: rgba(226, 74, 74, 0.65);
  background: rgba(226, 74, 74, 0.18);
  box-shadow: 0 0 0 4px rgba(226, 74, 74, 0.14);
}

/* sucesso vindo do dado roxo */
.gambi-die.is-success.suc-roxo {
  border-color: rgba(138, 77, 232, 0.7);
  background: rgba(138, 77, 232, 0.2);
  box-shadow: 0 0 0 4px rgba(138, 77, 232, 0.14);
}

/* ---------------------------------------
 * Rolagem — cores dos dados em sucesso
 * ------------------------------------- */

.gambi-die {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  min-width: 28px;
  height: 28px;
  padding: 0 6px;

  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(0, 0, 0, 0.18);

  font-weight: 700;
  line-height: 1;
  margin-right: 6px;
}

/* Sucesso: deixa “aceso” */
.gambi-die.is-success {
  border-color: rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.2) inset;
}

/* Sucesso por atributo */
.gambi-die.is-success.suc-corpo {
  background: rgba(31, 179, 91, 0.9);
  color: #fff;
} /* verde */
.gambi-die.is-success.suc-mente {
  background: rgba(47, 125, 225, 0.9);
  color: #fff;
} /* azul */
.gambi-die.is-success.suc-coracao {
  background: rgba(226, 74, 74, 0.9);
  color: #fff;
} /* vermelho */

/* Sucesso dos roxos */
.gambi-die.is-success.suc-roxo {
  background: rgba(138, 77, 232, 0.9);
  color: #fff;
} /* roxo */

/* Não-sucesso (mantém neutro) */
.gambi-die:not(.is-success) {
  opacity: 0.85;
}

.gambi-die.is-roxo {
  border-style: dashed;
}
.gambi-die.is-base {
  border-style: solid;
}
/* Itens usados (consumíveis sem carga) */
.gambi-item.is-used .item-name {
  text-decoration: line-through;
  opacity: 0.7;
}

.gambi-item.is-used {
  opacity: 0.75;
  background-image: repeating-linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.06) 6px,
    rgba(0, 0, 0, 0.06) 6px,
    rgba(0, 0, 0, 0.06) 12px
  );
  border-radius: 8px;
  padding: 2px 6px;
}

/* lista de itens */
.gambi-items {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.gambi-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 10px;
  border-radius: 10px;
}

.gambi-item-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}
.gambi-item-actions {
  display: flex;
  gap: 8px;
}

.gambi-item-badge {
  font-size: 12px;
  opacity: 0.85;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
}

.gambi-item-meta {
  font-size: 12px;
  opacity: 0.75;
}

/* ✅ usados: strikeout + hachurado */
.gambi-item.is-used .item-name {
  text-decoration: line-through;
  opacity: 0.7;
}

.gambi-item.is-used {
  opacity: 0.75;
  background-image: repeating-linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.06) 6px,
    rgba(0, 0, 0, 0.06) 6px,
    rgba(0, 0, 0, 0.06) 12px
  );
}

/* botão desabilitado (mais óbvio) */
.gambi-item button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}
